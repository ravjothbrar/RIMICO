<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Artisan Todo | Personal Library</title>

  <!-- Book Emoji Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Framer Motion -->
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

  <!-- Marked.js for Markdown -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            artisan: {
              purple: '#8B5CF6',
              purpleLight: '#A78BFA',
              purpleDark: '#7C3AED',
              lilac: '#E9E4F0',
              lilacLight: '#F3F0F7',
            }
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      font-family: 'Inter', sans-serif;
    }

    /* Light Lilac Background */
    .lilac-bg {
      background: linear-gradient(135deg, #E9E4F0 0%, #F3F0F7 50%, #E9E4F0 100%);
      min-height: 100vh;
    }

    /* Mahogany Shelf */
    .shelf {
      background: linear-gradient(
        180deg,
        #8B7355 0%,
        #6B4423 20%,
        #4A2C2A 50%,
        #6B4423 80%,
        #8B7355 100%
      );
      box-shadow:
        0 8px 24px rgba(0,0,0,0.3),
        inset 0 2px 4px rgba(255,255,255,0.15),
        inset 0 -2px 4px rgba(0,0,0,0.3);
    }

    /* 3D Book Spine */
    .book-spine {
      transform-style: preserve-3d;
      perspective: 1000px;
    }

    .book-spine-inner {
      transform: rotateY(-5deg);
      box-shadow:
        6px 6px 16px rgba(0,0,0,0.4),
        -3px 0 6px rgba(0,0,0,0.2),
        inset -6px 0 12px rgba(0,0,0,0.3),
        inset 3px 0 6px rgba(255,255,255,0.15);
    }

    .book-spine-inner::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 6px;
      background: linear-gradient(90deg,
        rgba(0,0,0,0.5) 0%,
        rgba(0,0,0,0.1) 100%
      );
    }

    .book-spine-inner::after {
      content: '';
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: rgba(255,255,255,0.15);
    }

    /* Page Flicker Animation */
    @keyframes pageFlicker {
      0%, 100% { transform: scaleX(1); opacity: 1; }
      10% { transform: scaleX(0.95); opacity: 0.9; }
      20% { transform: scaleX(1.02); opacity: 1; }
      30% { transform: scaleX(0.98); opacity: 0.85; }
      40% { transform: scaleX(1.01); opacity: 1; }
      50% { transform: scaleX(0.97); opacity: 0.9; }
      60% { transform: scaleX(1); opacity: 1; }
      70% { transform: scaleX(0.96); opacity: 0.88; }
      80% { transform: scaleX(1.02); opacity: 1; }
      90% { transform: scaleX(0.99); opacity: 0.92; }
    }

    .page-flicker {
      animation: pageFlicker 0.6s ease-in-out;
    }

    /* Custom Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
      height: 8px;
      width: 8px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(139, 92, 246, 0.1);
      border-radius: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #8B5CF6;
      border-radius: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #7C3AED;
    }

    /* Glass Effect */
    .glass {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(139, 92, 246, 0.2);
    }

    /* Modal Backdrop */
    .modal-backdrop {
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(4px);
    }

    /* Book Page Spread */
    .page-spread {
      background: linear-gradient(90deg,
        #FEFEFE 0%,
        #F8F8F8 49.5%,
        #E8E8E8 49.5%,
        #E8E8E8 50.5%,
        #F8F8F8 50.5%,
        #FEFEFE 100%
      );
      box-shadow: 0 25px 50px rgba(0,0,0,0.25);
    }

    /* Vertical Text */
    .vertical-text {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      transform: rotate(180deg);
    }

    /* Focus States */
    input:focus, button:focus, select:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
    }

    /* Markdown Styles */
    .markdown-content strong { font-weight: 600; }
    .markdown-content em { font-style: italic; }
    .markdown-content u { text-decoration: underline; }
    .markdown-content p { margin-bottom: 0.5rem; }
    .markdown-content ul, .markdown-content ol { padding-left: 1.5rem; margin-bottom: 0.5rem; }
    .markdown-content code {
      background: rgba(139, 92, 246, 0.1);
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
    }

    /* Attribution Button */
    .attribution-btn {
      border: 2px solid rgba(139, 92, 246, 0.3);
      transition: all 0.2s ease;
    }
    .attribution-btn:hover {
      border-color: #8B5CF6;
      background: rgba(139, 92, 246, 0.05);
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, createContext, useContext } = React;
    const { motion, AnimatePresence } = Motion;

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Context & State Management
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const useLocalStorage = (key, initialValue) => {
      const [storedValue, setStoredValue] = useState(() => {
        try {
          const item = window.localStorage.getItem(key);
          return item ? JSON.parse(item) : initialValue;
        } catch (error) {
          console.error(error);
          return initialValue;
        }
      });

      const setValue = (value) => {
        try {
          const valueToStore = value instanceof Function ? value(storedValue) : value;
          setStoredValue(valueToStore);
          window.localStorage.setItem(key, JSON.stringify(valueToStore));
        } catch (error) {
          console.error(error);
        }
      };

      return [storedValue, setValue];
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Shelf Color Configurations
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const SHELF_COLORS = {
      'Personal': {
        accent: '#8B5CF6',
        textColor: 'text-purple-100',
        bgClass: 'bg-gradient-to-b from-purple-500 via-purple-600 to-purple-800'
      },
      'School': {
        accent: '#1E40AF',
        textColor: 'text-blue-100',
        bgClass: 'bg-gradient-to-b from-blue-600 via-blue-700 to-blue-900'
      },
      'Beri': {
        accent: '#047857',
        textColor: 'text-emerald-100',
        bgClass: 'bg-gradient-to-b from-emerald-500 via-emerald-600 to-emerald-800'
      },
      'AI': {
        accent: '#0891B2',
        textColor: 'text-cyan-100',
        bgClass: 'bg-gradient-to-b from-cyan-500 via-cyan-600 to-cyan-800'
      }
    };

    // 2x the original widths
    const TIMEFRAME_WIDTHS = {
      'quick': 80,
      'short': 110,
      'medium': 140,
      'long': 180,
      'extended': 220
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Icons (SVG Components)
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const Icons = {
      Plus: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
        </svg>
      ),
      Archive: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />
        </svg>
      ),
      Book: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
      ),
      Check: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
        </svg>
      ),
      X: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
        </svg>
      ),
      Calendar: () => (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      ),
      Trash: () => (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
      ),
      Restore: () => (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
        </svg>
      ),
      User: () => (
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
      ),
      GitHub: () => (
        <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
      )
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Markdown Renderer Component
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const MarkdownContent = ({ content }) => {
      if (!content) return <span className="text-gray-400 italic">No description provided.</span>;

      const html = marked.parse(content, { breaks: true });
      return (
        <div
          className="markdown-content text-gray-700 leading-relaxed"
          dangerouslySetInnerHTML={{ __html: html }}
        />
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Attribution Link Component
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const AttributionLink = () => (
      <a
        href="https://ravjothbrar.com"
        target="_blank"
        rel="noopener noreferrer"
        className="attribution-btn inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white text-gray-600 text-sm font-medium"
      >
        <Icons.User />
        Created by Ravjoth
      </a>
    );

    const GitHubPagesButton = () => (
      <a
        href="https://pages.github.com"
        target="_blank"
        rel="noopener noreferrer"
        className="attribution-btn inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white text-gray-600 text-sm font-medium"
      >
        <Icons.GitHub />
        Hosted on GitHub Pages
      </a>
    );

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Book Spine Component (2x size)
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const BookSpine = ({ task, onClick, onComplete, isFlickering }) => {
      const shelfColor = SHELF_COLORS[task.label] || SHELF_COLORS['Personal'];
      const width = TIMEFRAME_WIDTHS[task.timeframe] || TIMEFRAME_WIDTHS['medium'];

      return (
        <motion.div
          className="book-spine relative cursor-pointer mx-2 flex-shrink-0"
          style={{ width: `${width}px` }}
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          exit={{ opacity: 0, scale: 0.8, y: -50 }}
          whileHover={{ y: -16, scale: 1.08, rotateY: -10 }}
          transition={{ type: "spring", stiffness: 300, damping: 20 }}
          onClick={onClick}
        >
          <div
            className={`book-spine-inner h-80 rounded-sm ${shelfColor.bgClass} ${isFlickering ? 'page-flicker' : ''} relative overflow-hidden`}
          >
            {/* Gold Foil Accents */}
            <div className="absolute top-4 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-yellow-400/60 to-transparent" />
            <div className="absolute bottom-4 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-yellow-400/60 to-transparent" />

            {/* Book Title */}
            <div className={`vertical-text h-full flex items-center justify-center px-3 ${shelfColor.textColor}`}>
              <span className="font-semibold text-sm tracking-wide truncate max-h-64">
                {task.name}
              </span>
            </div>

            {/* Complete Button */}
            <motion.button
              className="absolute bottom-3 left-1/2 -translate-x-1/2 w-10 h-10 rounded-full bg-white/25 hover:bg-white/50 flex items-center justify-center transition-all"
              onClick={(e) => {
                e.stopPropagation();
                onComplete(task.id);
              }}
              whileHover={{ scale: 1.2 }}
              whileTap={{ scale: 0.9 }}
            >
              <Icons.Check />
            </motion.button>
          </div>
        </motion.div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Shelf Component
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const Shelf = ({ label, tasks, onBookClick, onComplete, flickeringId }) => {
      const shelfColor = SHELF_COLORS[label] || SHELF_COLORS['Personal'];

      return (
        <motion.div
          className="mb-10"
          initial={{ opacity: 0, x: -20 }}
          animate={{ opacity: 1, x: 0 }}
          transition={{ duration: 0.5 }}
        >
          {/* Label */}
          <div className="flex items-center mb-3 px-6">
            <div
              className="w-4 h-4 rounded-full mr-3"
              style={{ backgroundColor: shelfColor.accent }}
            />
            <h3 className="text-xl font-bold text-artisan-purple">
              {label}
            </h3>
            <span className="ml-3 text-sm text-gray-500 font-medium">
              {tasks.length} {tasks.length === 1 ? 'book' : 'books'}
            </span>
          </div>

          {/* Shelf with Books */}
          <div className="relative">
            {/* Books Container */}
            <div className="custom-scrollbar overflow-x-auto pb-4">
              <div className="flex items-end min-h-[360px] px-6 pt-4">
                <AnimatePresence mode="popLayout">
                  {tasks.length === 0 ? (
                    <motion.div
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      className="text-sm text-gray-400 italic py-32 px-4"
                    >
                      This shelf is empty. Add a book to get started...
                    </motion.div>
                  ) : (
                    tasks.map((task) => (
                      <BookSpine
                        key={task.id}
                        task={task}
                        onClick={() => onBookClick(task)}
                        onComplete={onComplete}
                        isFlickering={flickeringId === task.id}
                      />
                    ))
                  )}
                </AnimatePresence>
              </div>
            </div>

            {/* Mahogany Shelf */}
            <div className="shelf relative h-8 rounded-b-sm mx-4" />
          </div>
        </motion.div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Page Spread Modal (Book Details)
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const PageSpreadModal = ({ task, onClose, onComplete, onDelete }) => {
      const shelfColor = SHELF_COLORS[task.label] || SHELF_COLORS['Personal'];

      const formatDate = (dateString) => {
        if (!dateString) return 'No due date';
        return new Date(dateString).toLocaleDateString('en-US', {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
      };

      return (
        <motion.div
          className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          onClick={onClose}
        >
          <motion.div
            className="page-spread relative w-full max-w-2xl rounded-2xl overflow-hidden"
            initial={{ scale: 0.8, rotateY: -90 }}
            animate={{ scale: 1, rotateY: 0 }}
            exit={{ scale: 0.8, rotateY: 90 }}
            transition={{ type: "spring", stiffness: 200, damping: 20 }}
            onClick={(e) => e.stopPropagation()}
          >
            {/* Close Button */}
            <button
              onClick={onClose}
              className="absolute top-4 right-4 w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors z-10"
            >
              <Icons.X />
            </button>

            <div className="p-8">
              {/* Header */}
              <div className="flex items-start gap-4 mb-6">
                <div
                  className="w-2 h-20 rounded-full flex-shrink-0"
                  style={{ backgroundColor: shelfColor.accent }}
                />
                <div className="flex-1">
                  <span
                    className="text-xs font-semibold uppercase tracking-wider px-3 py-1 rounded-full"
                    style={{ backgroundColor: `${shelfColor.accent}15`, color: shelfColor.accent }}
                  >
                    {task.label}
                  </span>
                  <h2 className="text-2xl font-bold text-gray-800 mt-3">
                    {task.name}
                  </h2>
                  <div className="flex items-center gap-2 text-gray-500 text-sm mt-2">
                    <Icons.Calendar />
                    <span>{formatDate(task.dueDate)}</span>
                  </div>
                </div>
              </div>

              {/* Divider */}
              <div className="border-t border-gray-200 my-6" />

              {/* Description with Markdown */}
              <div className="mb-6">
                <h4 className="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-3">
                  Description
                </h4>
                <MarkdownContent content={task.description} />
                <p className="text-xs text-gray-400 mt-3">
                  Supports **bold**, *italic*, `code`, and more
                </p>
              </div>

              {/* Timeframe */}
              <div className="mb-8">
                <h4 className="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-3">
                  Estimated Timeframe
                </h4>
                <span className="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-purple-100 text-purple-700 capitalize">
                  {task.timeframe}
                </span>
              </div>

              {/* Actions */}
              <div className="flex gap-3">
                <motion.button
                  className="flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-artisan-purple text-white rounded-xl font-semibold hover:bg-artisan-purpleDark transition-colors"
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                  onClick={() => {
                    onComplete(task.id);
                    onClose();
                  }}
                >
                  <Icons.Check />
                  Mark Complete
                </motion.button>
                <motion.button
                  className="flex items-center justify-center gap-2 px-6 py-3 bg-red-50 text-red-600 rounded-xl font-semibold hover:bg-red-100 transition-colors"
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                  onClick={() => {
                    onDelete(task.id);
                    onClose();
                  }}
                >
                  <Icons.Trash />
                </motion.button>
              </div>
            </div>
          </motion.div>
        </motion.div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Add Task Modal
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const AddTaskModal = ({ onClose, onAdd }) => {
      const [formData, setFormData] = useState({
        name: '',
        label: 'Personal',
        description: '',
        dueDate: '',
        timeframe: 'medium'
      });

      const handleSubmit = (e) => {
        e.preventDefault();
        if (formData.name.trim()) {
          onAdd({
            ...formData,
            id: Date.now().toString(),
            completed: false,
            createdAt: new Date().toISOString()
          });
          onClose();
        }
      };

      return (
        <motion.div
          className="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          onClick={onClose}
        >
          <motion.div
            className="bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl"
            initial={{ scale: 0.9, y: 20 }}
            animate={{ scale: 1, y: 0 }}
            exit={{ scale: 0.9, y: 20 }}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="p-6">
              {/* Header */}
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-bold text-gray-800">
                  Add New Book
                </h2>
                <button
                  onClick={onClose}
                  className="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-500 transition-colors"
                >
                  <Icons.X />
                </button>
              </div>

              <form onSubmit={handleSubmit} className="space-y-5">
                {/* Task Name */}
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Book Title *
                  </label>
                  <input
                    type="text"
                    required
                    value={formData.name}
                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                    className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:border-artisan-purple focus:bg-white transition-colors"
                    placeholder="What needs to be done?"
                  />
                </div>

                {/* Label Selection */}
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Shelf
                  </label>
                  <div className="grid grid-cols-2 gap-2">
                    {Object.keys(SHELF_COLORS).map((label) => (
                      <button
                        key={label}
                        type="button"
                        onClick={() => setFormData({ ...formData, label })}
                        className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all ${
                          formData.label === label
                            ? 'ring-2 ring-artisan-purple bg-purple-50 text-artisan-purple'
                            : 'bg-gray-50 text-gray-600 hover:bg-gray-100'
                        }`}
                      >
                        <span
                          className="inline-block w-3 h-3 rounded-full mr-2"
                          style={{ backgroundColor: SHELF_COLORS[label].accent }}
                        />
                        {label}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Description */}
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Description <span className="font-normal text-gray-400">(supports markdown)</span>
                  </label>
                  <textarea
                    value={formData.description}
                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                    rows={3}
                    className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 resize-none focus:border-artisan-purple focus:bg-white transition-colors"
                    placeholder="Add details... Use **bold**, *italic*, etc."
                  />
                </div>

                {/* Due Date */}
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Due Date <span className="font-normal text-gray-400">(optional)</span>
                  </label>
                  <input
                    type="date"
                    value={formData.dueDate}
                    onChange={(e) => setFormData({ ...formData, dueDate: e.target.value })}
                    className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:border-artisan-purple focus:bg-white transition-colors"
                  />
                  <p className="text-xs text-gray-400 mt-1">Earlier due dates appear on the left</p>
                </div>

                {/* Timeframe */}
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Timeframe <span className="font-normal text-gray-400">(determines book thickness)</span>
                  </label>
                  <select
                    value={formData.timeframe}
                    onChange={(e) => setFormData({ ...formData, timeframe: e.target.value })}
                    className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:border-artisan-purple focus:bg-white transition-colors"
                  >
                    <option value="quick">Quick (~15 min)</option>
                    <option value="short">Short (~30 min - 1 hr)</option>
                    <option value="medium">Medium (~1-2 hrs)</option>
                    <option value="long">Long (~Half day)</option>
                    <option value="extended">Extended (~Full day+)</option>
                  </select>
                </div>

                {/* Submit Button */}
                <motion.button
                  type="submit"
                  className="w-full px-6 py-4 bg-artisan-purple text-white rounded-xl font-semibold hover:bg-artisan-purpleDark transition-colors"
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                >
                  Add to Library
                </motion.button>
              </form>
            </div>
          </motion.div>
        </motion.div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Archive View
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const ArchiveView = ({ tasks, onRestore, onDelete }) => {
      const formatDate = (dateString) => {
        return new Date(dateString).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric',
          year: 'numeric'
        });
      };

      return (
        <div className="px-6 py-8">
          <h2 className="text-xl font-bold text-artisan-purple mb-6">
            Archived Books
          </h2>

          {tasks.length === 0 ? (
            <div className="text-center py-16 text-gray-400">
              <div className="mb-3">
                <Icons.Archive />
              </div>
              <p className="font-medium">No archived books yet</p>
              <p className="text-sm">Completed books will appear here</p>
            </div>
          ) : (
            <div className="space-y-3">
              <AnimatePresence>
                {tasks.map((task) => {
                  const shelfColor = SHELF_COLORS[task.label] || SHELF_COLORS['Personal'];
                  return (
                    <motion.div
                      key={task.id}
                      initial={{ opacity: 0, x: -20 }}
                      animate={{ opacity: 1, x: 0 }}
                      exit={{ opacity: 0, x: 20 }}
                      className="bg-white rounded-xl p-4 flex items-center gap-4 shadow-sm border border-gray-100"
                    >
                      <div
                        className="w-2 h-14 rounded-full flex-shrink-0"
                        style={{ backgroundColor: shelfColor.accent }}
                      />
                      <div className="flex-1 min-w-0">
                        <h4 className="font-semibold text-gray-800 truncate">
                          {task.name}
                        </h4>
                        <p className="text-sm text-gray-500">
                          Completed {formatDate(task.completedAt)}
                        </p>
                      </div>
                      <div className="flex gap-2">
                        <motion.button
                          className="p-2 rounded-lg bg-purple-50 text-artisan-purple hover:bg-purple-100 transition-colors"
                          whileHover={{ scale: 1.1 }}
                          whileTap={{ scale: 0.9 }}
                          onClick={() => onRestore(task.id)}
                          title="Restore"
                        >
                          <Icons.Restore />
                        </motion.button>
                        <motion.button
                          className="p-2 rounded-lg bg-red-50 text-red-500 hover:bg-red-100 transition-colors"
                          whileHover={{ scale: 1.1 }}
                          whileTap={{ scale: 0.9 }}
                          onClick={() => onDelete(task.id)}
                          title="Delete"
                        >
                          <Icons.Trash />
                        </motion.button>
                      </div>
                    </motion.div>
                  );
                })}
              </AnimatePresence>
            </div>
          )}
        </div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Main App Component
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const App = () => {
      const [tasks, setTasks] = useLocalStorage('artisan-todo-tasks', []);
      const [activeView, setActiveView] = useState('library');
      const [showAddModal, setShowAddModal] = useState(false);
      const [selectedTask, setSelectedTask] = useState(null);
      const [flickeringId, setFlickeringId] = useState(null);

      const activeTasks = tasks.filter(t => !t.completed);
      const archivedTasks = tasks.filter(t => t.completed);

      const sortByDueDate = (tasks) => {
        return [...tasks].sort((a, b) => {
          if (!a.dueDate && !b.dueDate) return 0;
          if (!a.dueDate) return 1;
          if (!b.dueDate) return -1;
          return new Date(a.dueDate) - new Date(b.dueDate);
        });
      };

      const tasksByLabel = Object.keys(SHELF_COLORS).reduce((acc, label) => {
        const labelTasks = activeTasks.filter(t => t.label === label);
        acc[label] = sortByDueDate(labelTasks);
        return acc;
      }, {});

      const handleComplete = (taskId) => {
        setFlickeringId(taskId);
        setTimeout(() => {
          setTasks(tasks.map(t =>
            t.id === taskId
              ? { ...t, completed: true, completedAt: new Date().toISOString() }
              : t
          ));
          setFlickeringId(null);
        }, 600);
      };

      const handleRestore = (taskId) => {
        setTasks(tasks.map(t =>
          t.id === taskId
            ? { ...t, completed: false, completedAt: null }
            : t
        ));
      };

      const handleDelete = (taskId) => {
        setTasks(tasks.filter(t => t.id !== taskId));
      };

      const handleAddTask = (newTask) => {
        setTasks([...tasks, newTask]);
      };

      return (
        <div className="lilac-bg min-h-screen">
          {/* Header */}
          <header className="pt-4 pb-3 px-4">
            {/* Top Bar with Attribution */}
            <div className="flex items-center justify-between max-w-6xl mx-auto mb-4">
              <AttributionLink />
              <h1 className="text-2xl font-bold text-artisan-purple">
                Artisan Todo
              </h1>
              <div className="w-[160px]"></div>
            </div>

            {/* Controls */}
            <div className="flex items-center justify-center gap-3">
              {/* View Toggle */}
              <div className="bg-white rounded-full p-1 flex shadow-sm border border-gray-100">
                <button
                  onClick={() => setActiveView('library')}
                  className={`px-5 py-2 rounded-full text-sm font-semibold transition-all flex items-center gap-2 ${
                    activeView === 'library'
                      ? 'bg-artisan-purple text-white'
                      : 'text-gray-500 hover:text-gray-700'
                  }`}
                >
                  <Icons.Book />
                  Library
                </button>
                <button
                  onClick={() => setActiveView('archive')}
                  className={`px-5 py-2 rounded-full text-sm font-semibold transition-all flex items-center gap-2 ${
                    activeView === 'archive'
                      ? 'bg-artisan-purple text-white'
                      : 'text-gray-500 hover:text-gray-700'
                  }`}
                >
                  <Icons.Archive />
                  Archive ({archivedTasks.length})
                </button>
              </div>

              {/* Add Button */}
              <motion.button
                onClick={() => setShowAddModal(true)}
                className="w-11 h-11 rounded-full bg-artisan-purple text-white flex items-center justify-center hover:bg-artisan-purpleDark transition-colors shadow-lg shadow-purple-200"
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
                title="Add New Book"
              >
                <Icons.Plus />
              </motion.button>
            </div>
          </header>

          {/* Main View */}
          <main className="pb-8">
            <AnimatePresence mode="wait">
              {activeView === 'library' ? (
                <motion.div
                  key="library"
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: 20 }}
                >
                  {Object.entries(tasksByLabel).map(([label, labelTasks]) => (
                    <Shelf
                      key={label}
                      label={label}
                      tasks={labelTasks}
                      onBookClick={setSelectedTask}
                      onComplete={handleComplete}
                      flickeringId={flickeringId}
                    />
                  ))}

                  {/* Empty State */}
                  {activeTasks.length === 0 && (
                    <motion.div
                      initial={{ opacity: 0 }}
                      animate={{ opacity: 1 }}
                      className="text-center py-20 text-gray-500"
                    >
                      <p className="text-6xl mb-4">üìö</p>
                      <p className="text-lg font-semibold text-gray-600 mb-2">Your Library Awaits</p>
                      <p className="mb-6">Click the + button to add your first book</p>
                      <motion.button
                        onClick={() => setShowAddModal(true)}
                        className="px-6 py-3 bg-artisan-purple text-white rounded-xl font-semibold hover:bg-artisan-purpleDark transition-colors inline-flex items-center gap-2 shadow-lg shadow-purple-200"
                        whileHover={{ scale: 1.05 }}
                        whileTap={{ scale: 0.95 }}
                      >
                        <Icons.Plus />
                        Add Your First Book
                      </motion.button>
                    </motion.div>
                  )}
                </motion.div>
              ) : (
                <motion.div
                  key="archive"
                  initial={{ opacity: 0, x: 20 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: -20 }}
                >
                  <ArchiveView
                    tasks={archivedTasks}
                    onRestore={handleRestore}
                    onDelete={handleDelete}
                  />
                </motion.div>
              )}
            </AnimatePresence>
          </main>

          {/* Footer */}
          <footer className="text-center py-6 px-4">
            <div className="flex items-center justify-center gap-4 flex-wrap">
              <AttributionLink />
              <GitHubPagesButton />
            </div>
          </footer>

          {/* Modals */}
          <AnimatePresence>
            {showAddModal && (
              <AddTaskModal
                onClose={() => setShowAddModal(false)}
                onAdd={handleAddTask}
              />
            )}

            {selectedTask && (
              <PageSpreadModal
                task={selectedTask}
                onClose={() => setSelectedTask(null)}
                onComplete={handleComplete}
                onDelete={handleDelete}
              />
            )}
          </AnimatePresence>
        </div>
      );
    };

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Render App
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
